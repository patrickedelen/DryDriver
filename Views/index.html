<!DOCTYPE html>
<html lang="en">
<head>

  <script
  src="http://maps.googleapis.com/maps/api/js">
  </script>

<script>
  var loc = document.getElementById("c_location");

  function getLocation() {
      if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else { 
          loc.value = "Geolocation is not supported by this browser.";
      }
  }

  function showPosition(position) {
      alert(position.coords.latitude);
      // loc.value = "works";
      document.getElementById("c_location").setAttribute('value', position.coords.latitude + 
      "," + position.coords.longitude);  
  }

  function showError(error) {
      switch(error.code) {
          case error.PERMISSION_DENIED:
              loc.value = "User denied the request for Geolocation."
              break;
          case error.POSITION_UNAVAILABLE:
              loc.value = "Location information is unavailable."
              break;
          case error.TIMEOUT:
              loc.value = "The request to get user location timed out."
              break;
          case error.UNKNOWN_ERROR:
              loc.value = "An unknown error occurred."
              break;
      }
  }
  function initialize() {
    var mapProp = {
      center:new google.maps.LatLng(51.508742,-0.120850),
      zoom:5,
      mapTypeControl: false,
      scaleControl: true,
      streetViewControl: false,
      zoomControl: true,
      zoomControlOptions: {
        position: google.maps.ControlPosition.LEFT_CENTER
      },
      mapTypeId:google.maps.MapTypeId.ROADMAP
    };
    var map=new google.maps.Map(document.getElementById("googleMap"), mapProp);
  }
  google.maps.event.addDomListener(window, 'load', initialize);
  </script>


  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <link rel="shortcut icon" href="/img/logo.png" />
  <title>DryDriver</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/drydriver.css" type="text/css" rel="stylesheet" media="screen,projection"/>
</head>
<body> 

  <div id="googleMap""></div>
  <div class="fixed-action-btn horizontal mainAddr">
  <a class="btn-floating btn-large red">
    <i class="large material-icons">menu</i>
  </a>
  <!-- <img src="/img/logo.png" \> -->
    <ul>
      <!-- <li><a class="btn-floating red"><i class="material-icons">share</i></a></li> -->
      <!-- <li><a class="btn-floating yellow darken-1" onclick="myFunction();"><i class="material-icons">format_quote</i></a></li> -->
      <li><a class="btn-floating green"><i class="material-icons" onclick="$('#modal2').openModal();" href="#">share</i></a></li>
      <li><a class="btn-floating blue"><i class="material-icons" onclick="$('#modal1').openModal();" href="#">report_problem</i></a></li>
    </ul>
  </div>
  
  <div class="card z-depth-3" style="margin-left:20%; width:60%;">
    <ul class="collapsible" data-collapsible="accordion">
    <li>
      <div class="collapsible-header"><input type="text" name="finalAddr" placeholder="Enter Destination"></div>
      <div class="collapsible-body"><input onclick="getLocation();" id="c_location" type="text" name="addr" placeholder="Current Location"></div>
      <div class="collapsible-body"><a class="btn-floating btn-medium waves-effect waves-light blue" style="float:right;"><i class="material-icons">navigation</i></a></div>
    </li>
   </ul>
  </div>
  <!-- <button onclick="myFunction()">Try it</button> -->
<!-- Modal Structure -->
  <div id="modal1" class="card modal bottom-sheet">
    <div class="modal-content">
      <h4>Report Location</h4>
      <p>Do you want to report your location as flooded?</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Yes</a>
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">No</a>
    </div>
  </div>

  <div id="modal2" class="card modal bottom-sheet">
    <div class="modal-content">
      <h4>Share Location</h4>
      <p>Placeholder for location sharing</p>
    </div>
    <div class="modal-footer">
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Yes</a>
      <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">No</a>
    </div>
  </div>


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

  </body>
</html>
